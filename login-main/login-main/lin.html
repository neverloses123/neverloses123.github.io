<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title></title>
   
  <script src="setting.js"></script>
  <script src="Cookie.js"></script> 
  <script src="dateTime.js"></script> 
  <script src="HTTP2024.js"></script>

 <script>
  var jsonObj = {
  "resourceType": "Observation",
  "status": "final",
  // "category": [
  //   {
  //     "coding": [
  //       {
  //         "system": "http://terminology.hl7.org/CodeSystem/observation-category",
  //         "code": "vital-signs",
  //         "display": "Vital Signs"
  //       }
  //     ],
  //     "text": "Vital Signs"
  //   }
  // ],
  "code": {
    "coding": [
      {
        "system": "http://loinc.org",
        "code": "9279-1",
        "display": "yn"
      }
    ],
    "text": "yn"
  },
  "subject": {
    "reference": "Patient/36128144",
    "display": "李兆珩"
  },
  "effectiveDateTime": "2023-10-11T08:30:00+00:00",
  "valueQuantity": {
    "value": 1,
    "system": "http://unitsofmeasure.org",
  },
  "referenceRange": [
    {
      "low": {
        "value": 1,
        "system": "http://unitsofmeasure.org",
      },
      "high": {
        "value": 0,
        "system": "http://unitsofmeasure.org",
      },
      "text": "Normal Range: 0.0 ~ 1.0"
    }
  ]
};
  
   function postData()
   { jsonObj.valueQuantity.value = parseFloat(document.getElementById("yn").value);
     jsonObj.effectiveDateTime = getFormattedTime();
     var jsonStr = JSON.stringify(jsonObj);
    //alert(jsonStr);
    var apiURL;
    apiURL = FHIRrootURL  + "Observation";
    // HTTPPostData( apiURL,jsonStr);
    sendHttpPost(apiURL, jsonStr, callBack);
   } 
   function callBack(ret) {
        console.log(ret);    
        alert(ret);
        }
</script> 
 
</head>
<h1>FHIR Condition 上傳</h1>
<body style="height: 800px">
    <p>多種動作型抽動搭配1種或1種以上的聲語型抽動且抽動症狀持續出現超過1年，其中沒有超過3個月以上無抽動。抽動非其他疾病造成。</p>
    yes or no: <input type="text" id="yn" />  <br/><br/>
    <input id="Button1" onclick="postData()"  type="button" value="postData" /><br/>
     
</body>

</html>